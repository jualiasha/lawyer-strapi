"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[8418],{218:function(D,f,t){t.r(f),t.d(f,{default:function(){return oe}});var e=t(32735),s=t(20108),v=t(67879),a=t(24989),c=t(94638),T=t(27649),M=t(82055),O=t(17e3),p=t(88369),l=t(59677);const m=async()=>{const{get:d}=(0,a.tg)(),{data:E}=await d((0,l.Gc)("email-templates"));return E},B=d=>{const{put:E}=(0,a.tg)();return E((0,l.Gc)("email-templates"),d)};var y=t(60216),n=t.n(y),r=t(56755),u=t(33827),o=t(94547),i=t(19786),P=t(3685),x=t(49372),Z=t(35658),j=t(99140),I=t(50563),J=t(44647),$=t(68625),Q=t(66456);const H=({canUpdate:d,onEditClick:E})=>{const{formatMessage:g}=(0,v.Z)();return e.createElement(r.i,{colCount:3,rowCount:3},e.createElement(u.h,null,e.createElement(o.Tr,null,e.createElement(i.Th,{width:"1%"},e.createElement(P.T,null,g({id:(0,l.OB)("Email.template.table.icon.label"),defaultMessage:"icon"}))),e.createElement(i.Th,null,e.createElement(x.Z,{variant:"sigma",textColor:"neutral600"},g({id:(0,l.OB)("Email.template.table.name.label"),defaultMessage:"name"}))),e.createElement(i.Th,{width:"1%"},e.createElement(P.T,null,g({id:(0,l.OB)("Email.template.table.action.label"),defaultMessage:"action"}))))),e.createElement(Z.p,null,e.createElement(o.Tr,{...(0,a.X7)({fn:()=>E("reset_password")})},e.createElement(i.Td,null,e.createElement(j.J,null,e.createElement(J.Z,{"aria-label":g({id:"global.reset-password",defaultMessage:"Reset password"})}))),e.createElement(i.Td,null,e.createElement(x.Z,null,g({id:"global.reset-password",defaultMessage:"Reset password"}))),e.createElement(i.Td,{...a.UW},e.createElement(I.h,{onClick:()=>E("reset_password"),label:g({id:(0,l.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:d&&e.createElement($.Z,null)}))),e.createElement(o.Tr,{...(0,a.X7)({fn:()=>E("email_confirmation")})},e.createElement(i.Td,null,e.createElement(j.J,null,e.createElement(Q.Z,{"aria-label":g({id:(0,l.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"})}))),e.createElement(i.Td,null,e.createElement(x.Z,null,g({id:(0,l.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"}))),e.createElement(i.Td,{...a.UW},e.createElement(I.h,{onClick:()=>E("email_confirmation"),label:g({id:(0,l.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:d&&e.createElement($.Z,null)})))))};H.propTypes={canUpdate:n().bool.isRequired,onEditClick:n().func.isRequired};var X=H,Y=t(92802),w=t(85025),k=t(55225),S=t(11299),q=t(31600),_=t(15335),U=t(5803),ee=t(10508),te=t(11406),K=t(41415),L=t(24346),ae=L.Ry().shape({options:L.Ry().shape({from:L.Ry().shape({name:L.Z_().required(a.I0.required),email:L.Z_().email(a.I0.email).required(a.I0.required)}).required(),response_email:L.Z_().email(a.I0.email),object:L.Z_().required(a.I0.required),message:L.Z_().required(a.I0.required)}).required(a.I0.required)});const N=({template:d,onToggle:E,onSubmit:g})=>{const{formatMessage:h}=(0,v.Z)();return e.createElement(w.P,{onClose:E,labelledBy:`${h({id:(0,l.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${h({id:(0,l.OB)(d.display),defaultMessage:d.display})}`},e.createElement(k.x,null,e.createElement(S.O,{label:`${h({id:(0,l.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${h({id:(0,l.OB)(d.display),defaultMessage:d.display})}`},e.createElement(S.$,null,h({id:(0,l.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})),e.createElement(S.$,null,h({id:(0,l.OB)(d.display),defaultMessage:d.display})))),e.createElement(Y.J9,{onSubmit:g,initialValues:d,validateOnChange:!1,validationSchema:ae,enableReinitialize:!0},({errors:R,values:b,handleChange:A,isSubmitting:F})=>e.createElement(a.l0,null,e.createElement(q.f,null,e.createElement(_.r,{gap:5},e.createElement(U.P,{col:6,s:12},e.createElement(a.jm,{intlLabel:{id:(0,l.OB)("PopUpForm.Email.options.from.name.label"),defaultMessage:"Shipper name"},name:"options.from.name",onChange:A,value:b.options.from.name,error:R?.options?.from?.name,type:"text"})),e.createElement(U.P,{col:6,s:12},e.createElement(a.jm,{intlLabel:{id:(0,l.OB)("PopUpForm.Email.options.from.email.label"),defaultMessage:"Shipper email"},name:"options.from.email",onChange:A,value:b.options.from.email,error:R?.options?.from?.email,type:"text"})),e.createElement(U.P,{col:6,s:12},e.createElement(a.jm,{intlLabel:{id:(0,l.OB)("PopUpForm.Email.options.response_email.label"),defaultMessage:"Response email"},name:"options.response_email",onChange:A,value:b.options.response_email,error:R?.options?.response_email,type:"text"})),e.createElement(U.P,{col:6,s:12},e.createElement(a.jm,{intlLabel:{id:(0,l.OB)("PopUpForm.Email.options.object.label"),defaultMessage:"Subject"},name:"options.object",onChange:A,value:b.options.object,error:R?.options?.object,type:"text"})),e.createElement(U.P,{col:12,s:12},e.createElement(ee.g,{label:h({id:(0,l.OB)("PopUpForm.Email.options.message.label"),defaultMessage:"Message"}),name:"options.message",onChange:A,value:b.options.message,error:R?.options?.message&&h({id:R.options.message,defaultMessage:R.options.message})})))),e.createElement(te.m,{startActions:e.createElement(K.z,{onClick:E,variant:"tertiary"},"Cancel"),endActions:e.createElement(K.z,{loading:F,type:"submit"},"Finish")}))))};N.propTypes={template:n().shape({display:n().string,icon:n().string,options:n().shape({from:n().shape({name:n().string,email:n().string}),message:n().string,object:n().string,response_email:n().string})}).isRequired,onSubmit:n().func.isRequired,onToggle:n().func.isRequired};var ne=N;const le=()=>e.createElement(a.O4,{permissions:p.Z.readEmailTemplates},e.createElement(se,null)),se=()=>{const{formatMessage:d}=(0,v.Z)(),{trackUsage:E}=(0,a.rS)(),{notifyStatus:g}=(0,c.G)(),h=(0,a.lm)(),{lockApp:R,unlockApp:b}=(0,a.o1)(),A=(0,e.useRef)(E),F=(0,s.useQueryClient)();(0,a.go)();const[ie,re]=(0,e.useState)(!1),[z,de]=(0,e.useState)(null),me=(0,e.useMemo)(()=>({update:p.Z.updateEmailTemplates}),[]),{isLoading:ce,allowedActions:{canUpdate:ue}}=(0,a.ss)(me),{status:pe,data:G}=(0,s.useQuery)("email-templates",()=>m(),{onSuccess(){g(d({id:(0,l.OB)("Email.template.data.loaded"),defaultMessage:"Email templates has been loaded"}))},onError(){h({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),Ee=ce||pe!=="success",W=()=>{re(C=>!C)},ge=C=>{de(C),W()},V=(0,s.useMutation)(C=>B({"email-templates":C}),{async onSuccess(){await F.invalidateQueries("email-templates"),h({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}}),A.current("didEditEmailTemplates"),b(),W()},onError(){h({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}}),b()},refetchActive:!0}),{isLoading:fe}=V,ve=C=>{R(),A.current("willEditEmailTemplates");const ye={...G,[z]:C};V.mutate(ye)};return Ee?e.createElement(T.o,{"aria-busy":"true"},e.createElement(a.SL,{name:d({id:(0,l.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(M.T,{title:d({id:(0,l.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(O.D,null,e.createElement(a.dO,null))):e.createElement(T.o,{"aria-busy":fe},e.createElement(a.SL,{name:d({id:(0,l.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(M.T,{title:d({id:(0,l.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(O.D,null,e.createElement(X,{onEditClick:ge,canUpdate:ue}),ie&&e.createElement(ne,{template:G[z],onToggle:W,onSubmit:ve})))};var oe=le},59677:function(D,f,t){t.d(f,{YX:function(){return a},Gc:function(){return M},OB:function(){return O.Z}});var e=t(86834),s=t.n(e),a=p=>Object.keys(p).reduce((l,m)=>{const B=p[m].controllers,y=Object.keys(B).reduce((n,r)=>(s()(B[r])||(n[r]=B[r]),n),{});return s()(y)||(l[m]={controllers:y}),l},{}),c=t(90201),M=p=>`/${c.Z}/${p}`,O=t(82069)},11299:function(D,f,t){t.d(f,{$:function(){return p},O:function(){return l}});var e=t(74512),s=t(77277),v=t(8471),a=t(72850),c=t(87933),T=t(49372),M=t(3685);const O=(0,v.ZP)(c.k)`
  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
    path {
      fill: ${({theme:m})=>m.colors.neutral500};
    }
  }
  :last-of-type ${a.x} {
    display: none;
  }
  :last-of-type ${T.Z} {
    color: ${({theme:m})=>m.colors.neutral800};
    font-weight: ${({theme:m})=>m.fontWeights.bold};
  }
`,p=({children:m})=>(0,e.jsxs)(O,{inline:!0,as:"li",children:[(0,e.jsx)(T.Z,{variant:"pi",textColor:"neutral600",children:m}),(0,e.jsx)(a.x,{"aria-hidden":!0,paddingLeft:3,paddingRight:3,children:(0,e.jsx)(s.Z,{})})]});p.displayName="Crumb";const l=({children:m,label:B,...y})=>(0,e.jsxs)(c.k,{...y,children:[(0,e.jsx)(M.T,{children:B}),(0,e.jsx)("ol",{"aria-hidden":!0,children:m})]});l.displayName="Breadcrumbs"},17e3:function(D,f,t){t.d(f,{D:function(){return a}});var e=t(32735),s=t(60216),v=t(72850);const a=({children:c})=>e.createElement(v.x,{paddingLeft:10,paddingRight:10},c);a.propTypes={children:s.node.isRequired}},82055:function(D,f,t){t.d(f,{T:function(){return m}});var e=t(32735),s=t(60216),v=t(8471),a=t(72850),c=t(87933);const T=n=>{const r=(0,e.useRef)(null),[u,o]=(0,e.useState)(!0),i=([P])=>{o(P.isIntersecting)};return(0,e.useEffect)(()=>{const P=r.current,x=new IntersectionObserver(i,n);return P&&x.observe(r.current),()=>{P&&x.disconnect()}},[r,n]),[r,u]};var M=t(63060);const O=(n,r)=>{const u=(0,M.W)(r);(0,e.useLayoutEffect)(()=>{const o=new ResizeObserver(u);return Array.isArray(n)?n.forEach(i=>{i.current&&o.observe(i.current)}):n.current&&o.observe(n.current),()=>{o.disconnect()}},[n,u])};var p=t(49372);const l=()=>{const n=(0,e.useRef)(null),[r,u]=(0,e.useState)(null),[o,i]=T({root:null,rootMargin:"0px",threshold:0});return O(o,()=>{o.current&&u(o.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{n.current&&u(n.current.getBoundingClientRect())},[n]),{containerRef:o,isVisible:i,baseHeaderLayoutRef:n,headerSize:r}},m=n=>{const{containerRef:r,isVisible:u,baseHeaderLayoutRef:o,headerSize:i}=l();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:i?.height},ref:r},u&&e.createElement(y,{ref:o,...n})),!u&&e.createElement(y,{...n,sticky:!0,width:i?.width}))};m.displayName="HeaderLayout";const B=(0,v.ZP)(a.x)`
  width: ${n=>n.width}px;
`,y=e.forwardRef(({navigationAction:n,primaryAction:r,secondaryAction:u,subtitle:o,title:i,sticky:P,width:x,...Z},j)=>{const I=typeof o=="string";return P?e.createElement(B,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:x,zIndex:4,"data-strapi-header-sticky":!0},e.createElement(c.k,{justifyContent:"space-between"},e.createElement(c.k,null,n&&e.createElement(a.x,{paddingRight:3},n),e.createElement(a.x,null,e.createElement(p.Z,{variant:"beta",as:"h1",...Z},i),I?e.createElement(p.Z,{variant:"pi",textColor:"neutral600"},o):o),u?e.createElement(a.x,{paddingLeft:4},u):null),e.createElement(c.k,null,r?e.createElement(a.x,{paddingLeft:2},r):void 0))):e.createElement(a.x,{ref:j,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0},n?e.createElement(a.x,{paddingBottom:2},n):null,e.createElement(c.k,{justifyContent:"space-between"},e.createElement(c.k,{minWidth:0},e.createElement(p.Z,{as:"h1",variant:"alpha",...Z},i),u?e.createElement(a.x,{paddingLeft:4},u):null),r),I?e.createElement(p.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},o):o)});y.displayName="BaseHeaderLayout",y.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},y.propTypes={navigationAction:s.node,primaryAction:s.node,secondaryAction:s.node,sticky:s.bool,subtitle:s.oneOfType([s.string,s.node]),title:s.string.isRequired,width:s.number},m.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},m.propTypes={navigationAction:s.node,primaryAction:s.node,secondaryAction:s.node,subtitle:s.oneOfType([s.string,s.node]),title:s.string.isRequired}},27649:function(D,f,t){t.d(f,{o:function(){return c}});var e=t(32735),s=t(60216),v=t(8471);const a=v.ZP.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,c=({labelledBy:T,...M})=>{const O=T||"main-content-title";return e.createElement(a,{"aria-labelledby":O,id:"main-content",tabIndex:-1,...M})};c.defaultProps={labelledBy:void 0},c.propTypes={labelledBy:s.string}}}]);
